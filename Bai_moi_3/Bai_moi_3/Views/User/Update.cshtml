@model Bai_moi_3.Models.User
@using Microsoft.AspNetCore.Mvc.Rendering
@{
    ViewData["Title"] = "Chỉnh Sửa Người Dùng";
}

<h2>Chỉnh Sửa Người Dùng</h2>

<form asp-action="Update" method="post" enctype="multipart/form-data">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="Id" /> @* Giữ lại Id *@
    <input type="hidden" asp-for="CreatedAt" /> @* Giữ lại CreatedAt nếu không muốn người dùng sửa đổi *@

    <div class="form-group">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Email"></label>
        <input asp-for="Email" class="form-control" />
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Password"></label>
        @* Mật khẩu: Thường để trống nếu không muốn thay đổi, hoặc yêu cầu nhập lại nếu muốn thay đổi.
           Không nên dùng textarea cho mật khẩu. *@
        <input asp-for="Password" type="password" class="form-control" placeholder="Để trống nếu không muốn thay đổi mật khẩu" />
        <span asp-validation-for="Password" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Role"></label>
        <input asp-for="Role" class="form-control" /> @* Đổi từ textarea sang input *@
        <span asp-validation-for="Role" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="DateOfBirth"></label>
        <input asp-for="DateOfBirth" type="date" class="form-control" /> @* Đổi từ textarea sang input type="date" *@
        <span asp-validation-for="DateOfBirth" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Address"></label>
        <input asp-for="Address" class="form-control" /> @* Đổi từ textarea sang input *@
        <span asp-validation-for="Address" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="PhoneNumber"></label>
        <input asp-for="PhoneNumber" class="form-control" /> @* Đổi từ textarea sang input *@
        <span asp-validation-for="PhoneNumber" class="text-danger"></span>
    </div>
    @* CreatedAt không nên cho phép sửa đổi thủ công, nên để hidden hoặc chỉ hiển thị *@
    @* <div class="form-group">
        <label asp-for="CreatedAt"></label>
        <input asp-for="CreatedAt" type="datetime-local" class="form-control" />
        <span asp-validation-for="CreatedAt" class="text-danger"></span>
    </div> *@

    <div class="form-group">
        <label asp-for="ImageUrl1">Ảnh Đại Diện</label>
        <input type="file" name="newImageUrl1" class="form-control" /> @* Quan trọng: dùng name="newImageUrl1" *@
        @if (!string.IsNullOrEmpty(Model.ImageUrl1))
        {
            <img src="@Model.ImageUrl1" alt="Ảnh Hiện Tại" style="max-width: 200px; margin-top: 10px;" />
            <p>Ảnh hiện tại</p>
        }
        else
        {
            <p>Chưa có ảnh đại diện</p>
        }
    </div>

    <button type="submit" class="btn btn-primary">Cập nhật</button>
    <a asp-action="Index" class="btn btn-secondary">Quay lại danh sách</a>
</form>
